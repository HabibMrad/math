<!doctype html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
    <style>
      table { margin: auto; }
    </style>
  </head>
  <body style="font-size:120%">
    <div style="width:760px;margin:auto">
<h1 id="notes-on-raneys-lemmas">Notes on Raney's Lemmas</h1>
<p>In a 1960 paper, George Raney proved the following two lemmas on cyclic shifts of a finite sequence that contain positive-only partial sums <span class="citation">(Raney 1960)</span>. This note expands on these lemmas.</p>
<p>I personally learned of these lemmas in chapter 7 of the book Concrete Mathematics <span class="citation">(Knuth, Patashnik, and Graham 1998)</span>, which explores their applications to generating functions.</p>
<h2 id="exact-values-for-finite-integer-sequences">Exact values for finite integer sequences</h2>
<h3 id="lemma-1">Lemma 1</h3>
<p>Suppose <span class="math">\(\sum_{i=1}^n x_i = 1\)</span>, where all <span class="math">\(x_i\in\mathbb{Z}\)</span>. Extend the sequence by letting <span class="math">\(x_{n+p}=x_p\)</span> for <span class="math">\(1\le p\le n\)</span>. Then there is a unique <span class="math">\(j\)</span>, <span class="math">\(1 \le j \le n\)</span>, such that</p>
<p><span class="math">\[\sum_{i=j}^{j+k-1} x_i &gt; 0; \quad 1 \le k \le n.\]</span></p>
<hr />
<p>Intuitively, we can think of such an index <span class="math">\(j\)</span> as a cyclic shift of the sequence that has partial sums that are all positive.</p>
<p>For example, the finite sequence <span class="math">\(\langle x_1, \ldots, x_5\rangle = \langle 3, -2, 4, -1, 1 \rangle\)</span> offers <span class="math">\(j=5\)</span> as the unique shift providing <span class="math">\(\langle x_5, x_6=x_1, \ldots, x_9=x_4\rangle = \langle 1, 3, -2, 4, -5\rangle\)</span> with partial sums <span class="math">\(\langle 1, 4, 2, 6, 1\rangle\)</span> that are all positive.</p>
<hr />
<p>Given a sequence <span class="math">\(\langle x_1, \ldots, x_n\rangle\)</span>, it's useful to say that an index <span class="math">\(i \in \{1,\ldots, n\}\)</span> is a <em>positive-sum shift</em> if and only if the partial sums of <span class="math">\(\langle x_i, \ldots, x_n, x_1, \ldots, x_{i-1}\rangle\)</span> are all positive. Since this note focuses on finite sequences, we'll also implicitly use arbitrary indexes <span class="math">\(x_j, j\in\mathbb{Z}\)</span>, to refer to <span class="math">\(x_k\)</span> with <span class="math">\(k\in \{1, \ldots, n\}, k\equiv j \pmod n\)</span>.</p>
<hr />
<p>Raney also proved (TODO CHECK) the related result:</p>
<h3 id="lemma-2">Lemma 2</h3>
<p>Suppose <span class="math">\(\sum_{i=1}^nx_i=\ell\)</span>, where <span class="math">\(x_i\in\mathbb{Z}\)</span> and <span class="math">\(x_i \le 1\)</span> for all <span class="math">\(i\)</span>. Then exactly <span class="math">\(\ell\)</span> indexes in <span class="math">\(\{1, \ldots, n\}\)</span> are positive-sum shifts.</p>
<hr />
<p>For example, let <span class="math">\(\langle x_1, \ldots, x_8\rangle = \langle -2, 1, 1, 0, -1, 1, 1, 1\rangle\)</span>. Then <span class="math">\(\sum x_i = 2\)</span>, and <span class="math">\(x_2, x_6\)</span> are the only positive-sum shifts:</p>
<table>
<thead>
<tr class="header">
<th align="left">shift</th>
<th align="left">partial sums</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><span class="math">\(\langle x_2, \ldots\rangle = \langle 1, 1, 0, -1, 1, 1, 1, -2\rangle\quad\)</span></td>
<td align="left"><span class="math">\(\langle 1, 2, 2, 1, 2, 3, 4, 2\rangle\)</span></td>
</tr>
<tr class="even">
<td align="left"><span class="math">\(\langle x_6, \ldots\rangle = \langle 1, 1, 1, -2, 1, 1, 0, -1\rangle\quad\)</span></td>
<td align="left"><span class="math">\(\langle 1, 2, 3, 1, 2, 3, 3, 2\rangle\)</span></td>
</tr>
</tbody>
</table>
<div class="references">
<h2 id="references" class="unnumbered">References</h2>
<p>Knuth, Donald E., Oren Patashnik, and Ronald L. Graham. 1998. <em>Concrete Mathematics: A Foundation for Computer Science</em>. addison-wesley.</p>
<p>Raney, George. 1960. “Functional Composition Patterns and Power Series Reversion.” <em>Transactions of the American Mathematical Society</em> 94: 441–51.</p>
</div>
    </div>
  </body>
</html>
